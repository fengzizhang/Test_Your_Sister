#coding:utf8
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from app_e.models import *
import datetime


'''年月日输入测试主页'''
def exam_e(request):
    exams = Exam_e.objects.all()
    return render_to_response('exam_e.html',{'exams':exams})

'''具体测试页面'''
def exam_e_info(request,eid):
    today_year = datetime.datetime.now().year
    today_month = datetime.datetime.now().month
    today_day = datetime.datetime.now().day
    #print type(today_year)
    exam = Exam_e.objects.get(id=eid)
    all_days = 0
    if request.method == 'POST':
        year  = request.POST['year']
        month = request.POST['month'] 
        day   = request.POST['day']

        year_num = today_year - int(year)
        month_num = today_month - int(month)
        day_num = today_day - int(day)
    
        all_days = year_num*365 + month_num*30 + day_num
        #print all_days
    exam_options = exam.exam_option_set.all()
    return render_to_response('exam_e_info.html',{'exam':exam,'exam-options':exam_options,'all_days':all_days})







    
